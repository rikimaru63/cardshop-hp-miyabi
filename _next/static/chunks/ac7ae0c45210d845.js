(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18451,13336,11202,e=>{"use strict";var t=e.i(21439);let s=(0,t.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],18451);let a=(0,t.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);e.s(["Grid",()=>a],13336);let r=(0,t.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["List",()=>r],11202)},63805,e=>{"use strict";let t=(0,e.i(21439).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],63805)},26735,e=>{"use strict";var t=e.i(30561),s=e.i(82726),a=e.i(6856),r=e.i(22611),l=e.i(99241);function i({product:e,className:i}){var n;let c=(0,r.useCartStore)(e=>e.addItem),o=e.stock<=0,d=void 0!==e.psaGrade,x=void 0!==e.bgsGrade;return(0,t.jsx)("div",{className:(0,l.cn)("card-premium group w-[165px] animate-zoom-in",i),children:(0,t.jsxs)(s.default,{href:`/products/${e.id}`,className:"block",children:[(0,t.jsxs)("div",{className:"product-image-container relative aspect-square border-b border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 via-white to-purple-50 opacity-30"}),(0,t.jsx)(a.default,{src:e.imageUrl,alt:e.name,fill:!0,className:"object-contain p-2 group-hover:scale-110 transition-transform duration-500 relative z-10"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer"}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-20",children:[e.isNew&&(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-[10px] font-bold text-white bg-gradient-to-r from-red-500 via-pink-500 to-red-600 rounded-full shadow-lg animate-bounce-slow neon-text",children:"âœ¨ NEW"}),d&&(0,t.jsxs)("span",{className:"inline-block px-2 py-1 text-[10px] font-bold text-white bg-gradient-to-r from-blue-600 via-blue-500 to-blue-700 rounded-full shadow-lg animate-glow",children:["ðŸ† PSA",e.psaGrade]}),x&&(0,t.jsxs)("span",{className:"inline-block px-2 py-1 text-[10px] font-bold text-white bg-gradient-to-r from-purple-600 via-purple-500 to-purple-700 rounded-full shadow-lg animate-glow",children:["ðŸ’Ž BGS",e.bgsGrade]}),e.onSale&&(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-[10px] font-bold text-white bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-full shadow-lg animate-pulse neon-text",children:"ðŸ”¥ SALE"})]}),(0,t.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-2 py-1 rounded-full text-[10px] font-bold shadow-lg transform rotate-12 hover:rotate-0 transition-transform duration-300",children:["Â¥",e.price.toLocaleString()]})}),o&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 to-gray-900/60 backdrop-blur-sm flex items-center justify-center z-30",children:(0,t.jsx)("div",{className:"bg-red-600 text-white font-bold text-sm px-3 py-2 rounded-lg shadow-lg transform -rotate-12 border-2 border-red-400",children:"SOLD OUT"})})]}),(0,t.jsxs)("div",{className:"p-3 bg-gradient-to-b from-white to-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-2",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 px-2 py-0.5 rounded-full text-[9px] font-medium",children:e.category}),e.set&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 px-2 py-0.5 rounded-full text-[9px] font-medium",children:e.set})]}),(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-900 line-clamp-2 min-h-[2rem] mb-2 group-hover:text-blue-800 transition-colors",children:e.name}),(e.rarity||e.condition&&!d&&!x)&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.rarity&&(0,t.jsxs)("span",{className:"inline-block px-2 py-0.5 text-[9px] bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 rounded-full font-medium border border-yellow-300",children:["â­ ",e.rarity]}),e.condition&&!d&&!x&&(0,t.jsxs)("span",{className:"inline-block px-2 py-0.5 text-[9px] bg-gradient-to-r from-green-100 to-green-200 text-green-800 rounded-full font-medium border border-green-300",children:["âœ¨ ",e.condition]})]}),(0,t.jsxs)("div",{className:"mb-3",children:[e.originalPrice&&e.originalPrice>e.price&&(0,t.jsx)("div",{className:"text-[10px] text-gray-500 line-through mb-1",children:(n=e.originalPrice,`\xa5${n.toLocaleString()}`)}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-baseline",children:[(0,t.jsxs)("span",{className:"text-lg font-bold price-highlight",children:["Â¥",e.price.toLocaleString()]}),(0,t.jsx)("span",{className:"text-[9px] text-gray-500 ml-1",children:"ç¨Žè¾¼"})]}),(0,t.jsx)("div",{className:"text-[9px] font-medium",children:o?(0,t.jsx)("span",{className:"text-red-600 bg-red-100 px-2 py-1 rounded-full animate-pulse",children:"åœ¨åº«åˆ‡ã‚Œ"}):e.stock<=3?(0,t.jsxs)("span",{className:"text-orange-600 bg-orange-100 px-2 py-1 rounded-full animate-bounce-slow",children:["æ®‹ã‚Š",e.stock,"ç‚¹"]}):(0,t.jsx)("span",{className:"text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"åœ¨åº«ã‚ã‚Š"})})]})]}),(0,t.jsxs)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),c(e)},disabled:o,className:(0,l.cn)("w-full py-2 px-3 text-[11px] font-bold rounded-xl transition-all duration-300 transform shadow-medium relative overflow-hidden",o?"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 text-white hover:from-orange-600 hover:via-red-600 hover:to-pink-600 hover:scale-110 active:scale-95 hover:shadow-strong interactive-element"),children:[(0,t.jsx)("span",{className:"relative z-10 flex items-center justify-center gap-1",children:o?(0,t.jsx)(t.Fragment,{children:"âŒ åœ¨åº«åˆ‡ã‚Œ"}):(0,t.jsx)(t.Fragment,{children:"ðŸ›’ ã‚«ãƒ¼ãƒˆã«å…¥ã‚Œã‚‹"})}),!o&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})]})]})})}e.s(["default",()=>i])},85899,e=>{"use strict";let t=(0,e.i(21439).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],85899)},41463,e=>{"use strict";let t=(0,e.i(21439).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],41463)},8292,e=>{"use strict";var t=e.i(30561),s=e.i(2047),a=e.i(32472),r=e.i(81147),l=e.i(13102),i=e.i(21439);let n=(0,i.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var c=e.i(64926),o=e.i(18451),d=e.i(31861),x=e.i(26185),m=e.i(20754),u=e.i(99241);function h({placeholder:e="Search for cards, sets, or characters...",className:a,showFilters:i=!0,showSuggestions:h=!0,onSearchFocus:g,onSearchBlur:p}){let{filters:y,searchHistory:b,recentSearches:f,isLoading:j,setQuery:v,search:N,clearHistory:w,toggleFilterSidebar:k,addToHistory:S}=(0,d.useSearchStore)(),[C,M]=(0,s.useState)(y.query),[T,P]=(0,s.useState)(!1),[L,A]=(0,s.useState)(!1),E=(0,s.useRef)(null),O=(0,s.useRef)(null),F=(0,s.useRef)(null);(0,s.useEffect)(()=>(E.current&&clearTimeout(E.current),C.trim()?E.current=setTimeout(()=>{v(C),N()},300):""===C&&v(""),()=>{E.current&&clearTimeout(E.current)}),[C,v,N]);let D=e=>{M(e),v(e),S(e),N(),A(!1),O.current?.blur()},z=b.filter(e=>e.toLowerCase().includes(C.toLowerCase())&&e!==C).slice(0,5),q=f.filter(e=>e.toLowerCase().includes(C.toLowerCase())&&e!==C).slice(0,3);return(0,t.jsxs)("div",{className:(0,u.cn)("relative w-full max-w-2xl",a),children:[(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C.trim()&&(v(C),S(C),N(),A(!1),O.current?.blur())},className:"relative",children:[(0,t.jsxs)("div",{className:"relative flex items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(m.Input,{ref:O,type:"text",value:C,onChange:e=>{let t=e.target.value;M(t),t.trim()&&h?A(!0):t.trim()||A(h&&(f.length>0||b.length>0))},onFocus:()=>{P(!0),A(h&&(f.length>0||b.length>0)),g?.()},onBlur:e=>{setTimeout(()=>{F.current?.contains(e.relatedTarget)||(P(!1),A(!1),p?.())},150)},placeholder:e,className:(0,u.cn)("w-full pl-10 pr-10 py-3 text-base","border-2 border-gray-200 rounded-lg","focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20","transition-all duration-200",T&&"ring-2 ring-blue-500/20")}),C&&(0,t.jsx)("button",{type:"button",onClick:()=>{M(""),v(""),A(!1),O.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,t.jsx)(l.X,{className:"h-4 w-4"})}),j&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"})})]}),i&&(0,t.jsx)(x.Button,{type:"button",variant:"outline",size:"icon",onClick:k,className:"ml-2 h-12 w-12","aria-label":"Toggle filters",children:(0,t.jsx)(o.Filter,{className:"h-4 w-4"})})]}),L&&(0,t.jsxs)("div",{ref:F,className:(0,u.cn)("absolute top-full left-0 right-0 mt-1 z-50","bg-white border border-gray-200 rounded-lg shadow-lg","max-h-80 overflow-y-auto"),children:[q.length>0&&(0,t.jsxs)("div",{className:"p-3 border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-sm font-medium text-gray-600",children:[(0,t.jsx)(n,{className:"h-4 w-4"}),"Recent Searches"]}),(0,t.jsx)("div",{className:"space-y-1",children:q.map((e,s)=>(0,t.jsx)("button",{type:"button",onClick:()=>D(e),className:"w-full text-left px-2 py-1 text-sm rounded hover:bg-gray-50 transition-colors",children:e},s))})]}),z.length>0&&(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600",children:[(0,t.jsx)(c.TrendingUp,{className:"h-4 w-4"}),"Search History"]}),(0,t.jsx)("button",{type:"button",onClick:w,className:"text-xs text-gray-500 hover:text-gray-700 transition-colors",children:"Clear"})]}),(0,t.jsx)("div",{className:"space-y-1",children:z.map((e,s)=>(0,t.jsx)("button",{type:"button",onClick:()=>D(e),className:"w-full text-left px-2 py-1 text-sm rounded hover:bg-gray-50 transition-colors",children:e},s))})]}),0===q.length&&0===z.length&&(0,t.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:C.trim()?"No recent searches found":"Start typing to search"})]})]}),T&&!L&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 p-2 text-xs text-gray-500 bg-white border border-gray-200 rounded-lg shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Press Enter to search"}),(0,t.jsx)("span",{className:"text-gray-400",children:"Ctrl+K for quick access"})]})})]})}var g=e.i(25498),p=e.i(3157);let y=(0,i.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),b=(0,i.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var f=e.i(32099),j=e.i(41463);let v=(0,i.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var N=e.i(63757),w=e.i(95674);function k({title:e,icon:a,children:r,defaultOpen:l=!0,className:i}){let[n,c]=(0,s.useState)(l);return(0,t.jsxs)("div",{className:(0,u.cn)("border-b border-gray-200 pb-4",i),children:[(0,t.jsxs)("button",{type:"button",onClick:()=>c(!n),className:"flex items-center justify-between w-full py-2 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a,(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e})]}),n?(0,t.jsx)(p.ChevronUp,{className:"h-4 w-4 text-gray-500"}):(0,t.jsx)(g.ChevronDown,{className:"h-4 w-4 text-gray-500"})]}),n&&(0,t.jsx)("div",{className:"mt-3 space-y-3",children:r})]})}function S({options:e,selectedValues:a,onChange:r,maxVisible:l=10}){let[i,n]=(0,s.useState)(!1),c=i?e:e.slice(0,l);return(0,t.jsxs)("div",{className:"space-y-2",children:[c.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:text-gray-700",children:[(0,t.jsx)("input",{type:"checkbox",checked:a.includes(e.value),onChange:t=>{var s;return s=e.value,void(t.target.checked?r([...a,s]):r(a.filter(e=>e!==s)))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),(0,t.jsx)("span",{className:"flex-1",children:e.label||e.value}),(0,t.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",e.count,")"]})]},e.value)),e.length>l&&(0,t.jsx)("button",{type:"button",onClick:()=>n(!i),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:i?"Show Less":`Show ${e.length-l} More`})]})}function C({min:e,max:a,currency:r,availableRange:l,onChange:i}){let[n,c]=(0,s.useState)(e?.toString()||""),[o,d]=(0,s.useState)(a?.toString()||""),x="USD"===r?"$":"Â¥",u="USD"===r?"0.01":"1";return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(N.Label,{htmlFor:"price-min",className:"text-xs text-gray-600",children:["Min ",x]}),(0,t.jsx)(m.Input,{id:"price-min",type:"number",step:u,min:"0",placeholder:"0",value:n,onChange:e=>{var t;c(t=e.target.value),i(t?parseFloat(t):void 0,a)},className:"text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(N.Label,{htmlFor:"price-max",className:"text-xs text-gray-600",children:["Max ",x]}),(0,t.jsx)(m.Input,{id:"price-max",type:"number",step:u,min:"0",placeholder:"Any",value:o,onChange:t=>{var s;d(s=t.target.value),i(e,s?parseFloat(s):void 0)},className:"text-sm"})]})]}),l&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Available range: ",x,l.min.toLocaleString()," - ",x,l.max.toLocaleString()]})]})}function M(){let{filters:e,availableFilters:s,isFilterSidebarOpen:a,closeFilterSidebar:r,setGameTypes:i,setRarities:n,setConditions:c,setPriceRange:m,setStockStatus:h,setCurrency:g,clearFilters:p,search:N}=(0,d.useSearchStore)(),M={POKEMON:"PokÃ©mon",ONE_PIECE:"One Piece",DRAGON_BALL:"Dragon Ball",YUGIOH:"Yu-Gi-Oh!",MTG:"Magic: The Gathering",DIGIMON:"Digimon",WEISS_SCHWARZ:"Weiss Schwarz",OTHER:"Other"},T={MINT:"Mint",NEAR_MINT:"Near Mint",EXCELLENT:"Excellent",GOOD:"Good",LIGHT_PLAYED:"Lightly Played",PLAYED:"Played",POOR:"Poor"},P=s?.gameTypes.map(e=>({value:e.value,count:e.count,label:M[e.value]||e.value}))||[],L=s?.rarities||[],A=s?.conditions.map(e=>({value:e.value,count:e.count,label:T[e.value]||e.value}))||[],E=s?.priceRange?"USD"===e.currency?{min:s.priceRange.min.usd,max:s.priceRange.max.usd}:{min:s.priceRange.min.jpy,max:s.priceRange.max.jpy}:null;return a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:r}),(0,t.jsxs)("div",{className:(0,u.cn)("fixed right-0 top-0 z-50 h-full w-80 bg-white shadow-xl","transform transition-transform duration-300 ease-in-out","lg:relative lg:transform-none lg:shadow-none lg:w-64","overflow-y-auto"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Filter,{className:"h-5 w-5"}),(0,t.jsx)("h2",{className:"font-semibold text-gray-900",children:"Filters"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(x.Button,{variant:"ghost",size:"sm",onClick:p,className:"text-gray-500 hover:text-gray-700",children:[(0,t.jsx)(y,{className:"h-4 w-4 mr-1"}),"Clear"]}),(0,t.jsx)("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 lg:hidden",children:(0,t.jsx)(l.X,{className:"h-5 w-5"})})]})]}),(0,t.jsxs)("div",{className:"p-4 space-y-6",children:[(0,t.jsx)(k,{title:"Currency",icon:(0,t.jsx)(b,{className:"h-4 w-4"}),children:(0,t.jsxs)(w.Select,{value:e.currency,onValueChange:e=>g(e),children:[(0,t.jsx)("option",{value:"USD",children:"USD ($)"}),(0,t.jsx)("option",{value:"JPY",children:"JPY (Â¥)"})]})}),(0,t.jsx)(k,{title:"Price Range",icon:(0,t.jsx)(b,{className:"h-4 w-4"}),children:(0,t.jsx)(C,{min:e.priceMin,max:e.priceMax,currency:e.currency,availableRange:E,onChange:m})}),(0,t.jsx)(k,{title:"Game Type",icon:(0,t.jsx)(j.Star,{className:"h-4 w-4"}),children:(0,t.jsx)(S,{options:P,selectedValues:e.gameTypes,onChange:e=>i(e)})}),(0,t.jsx)(k,{title:"Condition",icon:(0,t.jsx)(v,{className:"h-4 w-4"}),children:(0,t.jsx)(S,{options:A,selectedValues:e.conditions,onChange:e=>c(e)})}),(0,t.jsx)(k,{title:"Rarity",icon:(0,t.jsx)(j.Star,{className:"h-4 w-4"}),children:(0,t.jsx)(S,{options:L,selectedValues:e.rarities,onChange:n})}),(0,t.jsx)(k,{title:"Availability",icon:(0,t.jsx)(f.Package,{className:"h-4 w-4"}),children:(0,t.jsx)("div",{className:"space-y-2",children:[{value:"all",label:"All Items",count:0},{value:"in_stock",label:"In Stock",count:0},{value:"out_of_stock",label:"Out of Stock",count:0}].map(s=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:text-gray-700",children:[(0,t.jsx)("input",{type:"radio",name:"stock-status",value:s.value,checked:e.stockStatus===s.value,onChange:e=>h(e.target.value),className:"text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),(0,t.jsx)("span",{children:s.label})]},s.value))})})]}),(0,t.jsx)("div",{className:"sticky bottom-0 p-4 border-t border-gray-200 bg-white",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Button,{onClick:()=>{N()},className:"w-full",size:"lg",children:"Apply Filters"}),(0,t.jsxs)("div",{className:"text-xs text-center text-gray-500",children:[s?.gameTypes?.reduce((e,t)=>e+t.count,0)||0," products match your filters"]})]})})]})]}):null}function T(){let{toggleFilterSidebar:e}=(0,d.useSearchStore)();return(0,t.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:e,className:"lg:hidden",children:[(0,t.jsx)(o.Filter,{className:"h-4 w-4 mr-2"}),"Filters"]})}var P=e.i(13336),L=e.i(11202),A=e.i(85899),E=e.i(24335),O=e.i(26735);function F({className:e,showViewToggle:a=!0,showSort:r=!0,showPagination:l=!0,defaultView:i="grid"}){let{results:n,pagination:c,filters:o,isLoading:m,error:h,setSort:g,setPage:p,search:y}=(0,d.useSearchStore)(),[b,f]=s.default.useState(i),j=e=>{p(e),y()};return m?(0,t.jsx)("div",{className:(0,u.cn)("w-full",e),children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:8}).map((e,s)=>(0,t.jsx)("div",{className:"bg-gray-200 rounded-lg animate-pulse",style:{height:"320px"}},s))})}):h?(0,t.jsx)("div",{className:(0,u.cn)("w-full p-8 text-center",e),children:(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Search Error"}),(0,t.jsx)("p",{className:"text-red-600 mb-4",children:h}),(0,t.jsx)(x.Button,{onClick:y,variant:"outline",children:"Try Again"})]})}):n.length||m?(0,t.jsxs)("div",{className:(0,u.cn)("w-full space-y-4",e),children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:c&&(0,t.jsxs)(t.Fragment,{children:["Showing ",(0,t.jsx)("span",{className:"font-medium",children:(c.page-1)*c.limit+1}),"-",(0,t.jsx)("span",{className:"font-medium",children:Math.min(c.page*c.limit,c.total)})," of"," ",(0,t.jsx)("span",{className:"font-medium",children:c.total})," products"]})}),o.query&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:['for "',(0,t.jsx)("span",{className:"font-medium",children:o.query}),'"']})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,t.jsx)(w.Select,{value:o.sort,onValueChange:e=>{g(e),y()},children:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"name_asc",label:"Name A-Z"},{value:"name_desc",label:"Name Z-A"},{value:"price_asc",label:"Price Low to High"},{value:"price_desc",label:"Price High to Low"},{value:"stock_asc",label:"Stock Low to High"},{value:"stock_desc",label:"Stock High to Low"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),a&&(0,t.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-md",children:[(0,t.jsx)("button",{type:"button",onClick:()=>f("grid"),className:(0,u.cn)("p-2 rounded-l-md transition-colors","grid"===b?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":"Grid view",children:(0,t.jsx)(P.Grid,{className:"h-4 w-4"})}),(0,t.jsx)("button",{type:"button",onClick:()=>f("list"),className:(0,u.cn)("p-2 rounded-r-md transition-colors","list"===b?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":"List view",children:(0,t.jsx)(L.List,{className:"h-4 w-4"})})]})]})]}),(0,t.jsx)("div",{className:(0,u.cn)("grid"===b?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4"),children:n.map(e=>(0,t.jsx)(O.default,{product:{id:e.id,sku:e.sku,name:e.nameEn,nameEn:e.nameEn,nameJa:e.nameJa,price:"USD"===o.currency?e.priceUsd:e.priceJpy,priceUsd:e.priceUsd,priceJpy:e.priceJpy,description:e.description||"",category:e.category.nameEn,categoryId:e.categoryId,gameType:e.gameType,imageUrl:Array.isArray(e.images)&&e.images.length>0?e.images[0]:"/placeholder-card.jpg",images:Array.isArray(e.images)?e.images:[],stock:e.stockQuantity,stockQuantity:e.stockQuantity,rarity:e.rarity,condition:e.condition,set:e.cardSet,cardSet:e.cardSet,cardNumber:e.cardNumber,psaGrade:e.psaGrade,bgsGrade:e.bgsGrade,featured:e.featured,active:e.active}},e.id))}),l&&c&&c.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-8",children:[(0,t.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>j(c.page-1),disabled:!c.hasPreviousPage,children:[(0,t.jsx)(A.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(()=>{if(!c)return[];let{page:e,totalPages:t}=c,s=[];if(t<=7)for(let e=1;e<=t;e++)s.push(e);else if(e<=4){for(let e=1;e<=5;e++)s.push(e);s.push("..."),s.push(t)}else if(e>=t-3){s.push(1),s.push("...");for(let e=t-4;e<=t;e++)s.push(e)}else{s.push(1),s.push("...");for(let t=e-1;t<=e+1;t++)s.push(t);s.push("..."),s.push(t)}return s})().map((e,s)=>"..."===e?(0,t.jsx)("span",{className:"px-2 py-1 text-gray-500",children:"..."},`ellipsis-${s}`):(0,t.jsx)("button",{type:"button",onClick:()=>j(e),className:(0,u.cn)("px-3 py-1 rounded-md text-sm font-medium transition-colors",e===c.page?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:e},e))}),(0,t.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>j(c.page+1),disabled:!c.hasNextPage,children:["Next",(0,t.jsx)(E.ChevronRight,{className:"h-4 w-4"})]})]}),c&&(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500 pt-4",children:["Page ",c.page," of ",c.totalPages]})]}):(0,t.jsx)("div",{className:(0,u.cn)("w-full p-8 text-center",e),children:(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:(0,t.jsx)(P.Grid,{className:"h-16 w-16 mx-auto"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or filters to find what you're looking for."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[(0,t.jsx)(x.Button,{onClick:()=>{o.query},variant:"outline",children:"Clear Filters"}),(0,t.jsx)(x.Button,{onClick:y,children:"Search Again"})]})]})})}function D(){let{filters:e,pagination:s,isLoading:a}=(0,d.useSearchStore)();return a||!s?null:(0,t.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:s.total}),(0,t.jsx)("span",{className:"text-gray-600",children:"products found"}),e.query&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-600",children:['matching "',(0,t.jsx)("span",{className:"font-medium",children:e.query}),'"']})]}),e.category&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-600",children:["in ",(0,t.jsx)("span",{className:"font-medium",children:e.category})]})]}),e.gameTypes.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[e.gameTypes.length," game type",1!==e.gameTypes.length?"s":""," selected"]})]}),(e.priceMin||e.priceMax)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-600",children:["USD"===e.currency?"$":"Â¥",e.priceMin||"0"," -","USD"===e.currency?"$":"Â¥",e.priceMax||"âˆž"]})]})]})})}var z=e.i(63805);function q(){let e=(0,a.useRouter)(),r=(0,a.useSearchParams)(),{filters:i,results:n,pagination:c,isLoading:o,error:m,hasActiveFilters:u,search:g,setQuery:p,setCategory:y,setGameTypes:b,setPriceRange:f,setRarities:j,setConditions:v,setStockStatus:N,setCurrency:w,setSort:k,clearFilters:S}=function(){let{filters:e,results:t,pagination:a,availableFilters:r,isLoading:l,error:i,searchHistory:n,recentSearches:c,setQuery:o,setCategory:x,setGameTypes:m,setPriceRange:u,setRarities:h,setConditions:g,setStockStatus:p,setCurrency:y,setSort:b,setPage:f,addGameType:j,removeGameType:v,addRarity:N,removeRarity:w,addCondition:k,removeCondition:S,search:C,clearFilters:M,resetToDefaults:T,addToHistory:P,clearHistory:L}=(0,d.useSearchStore)(),A=(0,s.useCallback)(async t=>{t?(Object.entries(t).forEach(([t,s])=>{switch(t){case"query":o(s);break;case"category":x(s);break;case"gameTypes":m(s);break;case"priceMin":case"priceMax":u("priceMin"===t?s:e.priceMin,"priceMax"===t?s:e.priceMax);break;case"rarities":h(s);break;case"conditions":g(s);break;case"stockStatus":p(s);break;case"currency":y(s);break;case"sort":b(s)}}),setTimeout(C,10)):await C()},[e,C,o,x,m,u,h,g,p,y,b]);return{filters:e,results:t,pagination:a,availableFilters:r,isLoading:l,error:i,searchHistory:n,recentSearches:c,setQuery:o,setCategory:x,setGameTypes:m,setPriceRange:u,setRarities:h,setConditions:g,setStockStatus:p,setCurrency:y,setSort:b,setPage:f,addGameType:j,removeGameType:v,addRarity:N,removeRarity:w,addCondition:k,removeCondition:S,search:A,clearFilters:M,resetToDefaults:T,addToHistory:P,clearHistory:L,hasActiveFilters:!!(e.query||e.category||e.gameTypes.length>0||e.rarities.length>0||e.conditions.length>0||e.priceMin||e.priceMax||"all"!==e.stockStatus),totalFiltersCount:[e.gameTypes.length,e.rarities.length,e.conditions.length,+!!e.priceMin,+!!e.priceMax,+("all"!==e.stockStatus)].reduce((e,t)=>e+t,0)}}();return!function(){let{setQuery:e,search:t,clearFilters:a}=(0,d.useSearchStore)();(0,s.useEffect)(()=>{let s=s=>{if((s.ctrlKey||s.metaKey)&&"k"===s.key){s.preventDefault();let e=document.querySelector('input[type="text"]');e&&(e.focus(),e.select())}if((s.ctrlKey||s.metaKey)&&"Enter"===s.key&&(s.preventDefault(),t()),(s.ctrlKey||s.metaKey)&&"Backspace"===s.key&&(s.preventDefault(),a()),"Escape"===s.key){let t=document.activeElement;t?.tagName==="INPUT"&&(e(""),t.blur())}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,t,a])}(),(0,s.useEffect)(()=>{let e=r.get("q")||"",t=r.get("category")||"",s=r.get("gameTypes")?.split(",").filter(Boolean)||[],a=r.get("minPrice")?parseFloat(r.get("minPrice")):void 0,l=r.get("maxPrice")?parseFloat(r.get("maxPrice")):void 0,n=r.get("rarities")?.split(",").filter(Boolean)||[],c=r.get("conditions")?.split(",").filter(Boolean)||[],o=r.get("stock")||"all",d=r.get("currency")||"USD",x=r.get("sort")||"newest";e!==i.query&&p(e),t!==i.category&&y(t),JSON.stringify(s)!==JSON.stringify(i.gameTypes)&&b(s),(a!==i.priceMin||l!==i.priceMax)&&f(a,l),JSON.stringify(n)!==JSON.stringify(i.rarities)&&j(n),JSON.stringify(c)!==JSON.stringify(i.conditions)&&v(c),o!==i.stockStatus&&N(o),d!==i.currency&&w(d),x!==i.sort&&k(x),(e||t||s.length>0||u)&&g()},[r]),(0,s.useEffect)(()=>{let t=new URLSearchParams;i.query&&t.set("q",i.query),i.category&&t.set("category",i.category),i.gameTypes.length>0&&t.set("gameTypes",i.gameTypes.join(",")),i.priceMin&&t.set("minPrice",i.priceMin.toString()),i.priceMax&&t.set("maxPrice",i.priceMax.toString()),i.rarities.length>0&&t.set("rarities",i.rarities.join(",")),i.conditions.length>0&&t.set("conditions",i.conditions.join(",")),"all"!==i.stockStatus&&t.set("stock",i.stockStatus),"USD"!==i.currency&&t.set("currency",i.currency),"newest"!==i.sort&&t.set("sort",i.sort);let s=t.toString()?`/search?${t.toString()}`:"/search";window.location.pathname+window.location.search!==s&&e.replace(s,{scroll:!1})},[i,e]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-30",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4 lg:mb-0",children:[(0,t.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>e.back(),className:"lg:hidden",children:(0,t.jsx)(z.ArrowLeft,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(h,{placeholder:"Search for trading cards, sets, or characters...",className:"w-full",showFilters:!1})}),(0,t.jsx)(T,{})]}),u&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mt-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Active filters:"}),i.query&&(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:[(0,t.jsxs)("span",{children:['"',i.query,'"']}),(0,t.jsx)("button",{type:"button",onClick:()=>p(""),className:"text-blue-600 hover:text-blue-800",children:(0,t.jsx)(l.X,{className:"h-3 w-3"})})]}),i.category&&(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-1 rounded-md text-sm",children:[(0,t.jsxs)("span",{children:["Category: ",i.category]}),(0,t.jsx)("button",{type:"button",onClick:()=>y(""),className:"text-green-600 hover:text-green-800",children:(0,t.jsx)(l.X,{className:"h-3 w-3"})})]}),i.gameTypes.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-1 rounded-md text-sm",children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)("button",{type:"button",onClick:()=>b(i.gameTypes.filter(t=>t!==e)),className:"text-purple-600 hover:text-purple-800",children:(0,t.jsx)(l.X,{className:"h-3 w-3"})})]},e)),(i.priceMin||i.priceMax)&&(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-orange-100 text-orange-800 px-2 py-1 rounded-md text-sm",children:[(0,t.jsxs)("span",{children:["Price: ","USD"===i.currency?"$":"Â¥",i.priceMin||"0"," -","USD"===i.currency?"$":"Â¥",i.priceMax||"âˆž"]}),(0,t.jsx)("button",{type:"button",onClick:()=>f(void 0,void 0),className:"text-orange-600 hover:text-orange-800",children:(0,t.jsx)(l.X,{className:"h-3 w-3"})})]}),"all"!==i.stockStatus&&(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-red-100 text-red-800 px-2 py-1 rounded-md text-sm",children:[(0,t.jsx)("span",{children:"in_stock"===i.stockStatus?"In Stock":"Out of Stock"}),(0,t.jsx)("button",{type:"button",onClick:()=>N("all"),className:"text-red-600 hover:text-red-800",children:(0,t.jsx)(l.X,{className:"h-3 w-3"})})]}),(0,t.jsx)(x.Button,{variant:"outline",size:"sm",onClick:S,className:"text-gray-600 hover:text-gray-800",children:"Clear All"})]})]})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsx)("div",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 sticky top-24",children:(0,t.jsx)(M,{})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(D,{}),(0,t.jsx)(F,{className:"mt-6",showViewToggle:!0,showSort:!0,showPagination:!0})]})]})}),(0,t.jsx)(M,{}),(0,t.jsxs)("div",{className:"hidden",children:[(0,t.jsx)("h1",{children:i.query?`Search results for "${i.query}" - Trading Card Shop`:"Search Trading Cards - Card Shop International"}),(0,t.jsx)("p",{children:"Find the best trading cards from Pokemon, One Piece, Dragon Ball, Yu-Gi-Oh!, Magic: The Gathering, and more. Search by game type, rarity, condition, and price range."})]})]})}function G(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading search page..."})]})}),children:(0,t.jsx)(q,{})})}e.s(["default",()=>G],8292)}]);